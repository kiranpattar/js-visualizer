{"ast":null,"code":"var _jsxFileName = \"/Users/sreedevir/Downloads/js-visualizer-starter/src/components/EditorPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport Editor from \"@monaco-editor/react\";\nimport \"./EditorPage.css\";\nimport { useCallStack } from \"./CallStackContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditorPage() {\n  _s();\n  const [code, setCode] = useState(`const a = track(function a() {\n  b();\n}, \"a\");\n\nconst b = track(function b() {\n  console.log(\"Inside b\");\n  setTimeout(() => {\n    console.log(\"setTimeout done\");\n  }, 0);\n\n  Promise.resolve().then(() => {\n    console.log(\"Promise resolved\");\n  });\n\n  const obj = { message: \"hello\" }; // heap\n  console.log(\"Heap object created\", obj);\n}, \"b\");\n\na();`);\n  const [logs, setLogs] = useState([]);\n  const [callStackLogs, setCallStackLogs] = useState([]);\n  const [executionSpeed, setExecutionSpeed] = useState(500);\n  const {\n    callStack,\n    setCallStack\n  } = useCallStack();\n  const delay = ms => new Promise(res => setTimeout(res, ms));\n  const runCode = async () => {\n    const capturedLogs = [];\n    const capturedStackLogs = [];\n    const newCallStack = [];\n    const originalLog = console.log;\n    console.log = (...args) => {\n      const message = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : String(arg)).join(\" \");\n      capturedLogs.push(message);\n      if (message.startsWith(\">> Enter:\")) {\n        const fn = message.split(\":\")[1].trim();\n        newCallStack.push({\n          type: \"enter\",\n          fn\n        });\n        capturedStackLogs.push({\n          type: \"enter\",\n          fn\n        });\n      } else if (message.startsWith(\"<< Exit:\")) {\n        const fn = message.split(\":\")[1].trim();\n        newCallStack.push({\n          type: \"exit\",\n          fn\n        });\n        capturedStackLogs.push({\n          type: \"exit\",\n          fn\n        });\n      }\n    };\n    try {\n      const track = (fn, name) => {\n        return function (...args) {\n          console.log(`>> Enter: ${name}`);\n          const result = fn.apply(this, args);\n          console.log(`<< Exit: ${name}`);\n          return result;\n        };\n      };\n      const AsyncFunction = Object.getPrototypeOf(async function () {}).constructor;\n      const wrappedCode = new AsyncFunction(\"track\", code);\n      await wrappedCode(track);\n    } catch (e) {\n      capturedLogs.push(`Error: ${e.message}`);\n    }\n    console.log = originalLog;\n    setLogs(capturedLogs);\n    setCallStackLogs(capturedStackLogs);\n\n    // Animate the call stack\n    for (let i = 0; i < newCallStack.length; i++) {\n      const step = newCallStack[i];\n      setCallStack(prev => {\n        if (step.type === \"enter\") return [...prev, step.fn];\n        if (step.type === \"exit\") return prev.slice(0, -1);\n        return prev;\n      });\n      await delay(executionSpeed);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"editor-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor-section\",\n      children: [/*#__PURE__*/_jsxDEV(Editor, {\n        height: \"400px\",\n        language: \"javascript\",\n        theme: \"vs-dark\",\n        value: code,\n        onChange: value => setCode(value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"run-btn\",\n          onClick: runCode,\n          children: \"\\u25B6\\uFE0F Run\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"slider\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u23F1 Speed:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"100\",\n            max: \"2000\",\n            value: executionSpeed,\n            onChange: e => setExecutionSpeed(Number(e.target.value))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"output-layout\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logs-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Console Logs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: logs.join(\"\\n\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"callstack-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Call Stack\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: callStack.map((fn, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"enter\",\n            children: [\"\\uD83D\\uDD39 \", fn]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n_s(EditorPage, \"Gp/cFHFpA06OwxJVU9Ti5YJv7yw=\", false, function () {\n  return [useCallStack];\n});\n_c = EditorPage;\nvar _c;\n$RefreshReg$(_c, \"EditorPage\");","map":{"version":3,"names":["React","useState","Editor","useCallStack","jsxDEV","_jsxDEV","EditorPage","_s","code","setCode","logs","setLogs","callStackLogs","setCallStackLogs","executionSpeed","setExecutionSpeed","callStack","setCallStack","delay","ms","Promise","res","setTimeout","runCode","capturedLogs","capturedStackLogs","newCallStack","originalLog","console","log","args","message","map","arg","JSON","stringify","String","join","push","startsWith","fn","split","trim","type","track","name","result","apply","AsyncFunction","Object","getPrototypeOf","constructor","wrappedCode","e","i","length","step","prev","slice","className","children","height","language","theme","value","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","min","max","Number","target","idx","_c","$RefreshReg$"],"sources":["/Users/sreedevir/Downloads/js-visualizer-starter/src/components/EditorPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Editor from \"@monaco-editor/react\";\nimport \"./EditorPage.css\";\nimport { useCallStack } from \"./CallStackContext\";\n\nexport default function EditorPage() {\n  const [code, setCode] = useState(`const a = track(function a() {\n  b();\n}, \"a\");\n\nconst b = track(function b() {\n  console.log(\"Inside b\");\n  setTimeout(() => {\n    console.log(\"setTimeout done\");\n  }, 0);\n\n  Promise.resolve().then(() => {\n    console.log(\"Promise resolved\");\n  });\n\n  const obj = { message: \"hello\" }; // heap\n  console.log(\"Heap object created\", obj);\n}, \"b\");\n\na();`);\n\n  const [logs, setLogs] = useState([]);\n  const [callStackLogs, setCallStackLogs] = useState([]);\n  const [executionSpeed, setExecutionSpeed] = useState(500);\n  const { callStack, setCallStack } = useCallStack();\n\n  const delay = (ms) => new Promise((res) => setTimeout(res, ms));\n\n  const runCode = async () => {\n    const capturedLogs = [];\n    const capturedStackLogs = [];\n    const newCallStack = [];\n\n    const originalLog = console.log;\n    console.log = (...args) => {\n      const message = args.map(arg =>\n        typeof arg === 'object' ? JSON.stringify(arg) : String(arg)\n      ).join(\" \");\n      capturedLogs.push(message);\n\n      if (message.startsWith(\">> Enter:\")) {\n        const fn = message.split(\":\")[1].trim();\n        newCallStack.push({ type: \"enter\", fn });\n        capturedStackLogs.push({ type: \"enter\", fn });\n      } else if (message.startsWith(\"<< Exit:\")) {\n        const fn = message.split(\":\")[1].trim();\n        newCallStack.push({ type: \"exit\", fn });\n        capturedStackLogs.push({ type: \"exit\", fn });\n      }\n    };\n\n    try {\n      const track = (fn, name) => {\n        return function (...args) {\n          console.log(`>> Enter: ${name}`);\n          const result = fn.apply(this, args);\n          console.log(`<< Exit: ${name}`);\n          return result;\n        };\n      };\n\n      const AsyncFunction = Object.getPrototypeOf(async function () { }).constructor;\n      const wrappedCode = new AsyncFunction(\"track\", code);\n      await wrappedCode(track);\n    } catch (e) {\n      capturedLogs.push(`Error: ${e.message}`);\n    }\n\n    console.log = originalLog;\n\n    setLogs(capturedLogs);\n    setCallStackLogs(capturedStackLogs);\n\n    // Animate the call stack\n    for (let i = 0; i < newCallStack.length; i++) {\n      const step = newCallStack[i];\n      setCallStack((prev) => {\n        if (step.type === \"enter\") return [...prev, step.fn];\n        if (step.type === \"exit\") return prev.slice(0, -1);\n        return prev;\n      });\n      await delay(executionSpeed);\n    }\n  };\n\n  return (\n    <div className=\"editor-page\">\n      <div className=\"editor-section\">\n        <Editor\n          height=\"400px\"\n          language=\"javascript\"\n          theme=\"vs-dark\"\n          value={code}\n          onChange={(value) => setCode(value)}\n        />\n        <div className=\"controls\">\n          <button className=\"run-btn\" onClick={runCode}>‚ñ∂Ô∏è Run</button>\n          <div className=\"slider\">\n            <label>‚è± Speed:</label>\n            <input\n              type=\"range\"\n              min=\"100\"\n              max=\"2000\"\n              value={executionSpeed}\n              onChange={(e) => setExecutionSpeed(Number(e.target.value))}\n            />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"output-layout\">\n        <div className=\"logs-panel\">\n          <h3>Console Logs</h3>\n          <pre>{logs.join(\"\\n\")}</pre>\n        </div>\n\n        <div className=\"callstack-panel\">\n          <h3>Call Stack</h3>\n          <ul>\n            {callStack.map((fn, idx) => (\n              <li key={idx} className=\"enter\">üîπ {fn}</li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}