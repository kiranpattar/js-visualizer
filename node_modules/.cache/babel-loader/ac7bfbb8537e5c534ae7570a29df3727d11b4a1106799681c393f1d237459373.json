{"ast":null,"code":"var _jsxFileName = \"/Users/sreedevir/Downloads/js-visualizer-starter/src/components/EditorPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport Editor from \"@monaco-editor/react\";\nimport MemoryVisualizer from \"./MemoryVisualizer\";\nimport { run } from \"./interpreter\";\nimport \"./EditorPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditorPage() {\n  _s();\n  const editorRef = useRef(null);\n  const [code, setCode] = useState(`function foo() {\n  console.log(\">> Enter: foo\");\n  bar();\n  console.log(\"<< Exit: foo\");\n}\nfunction bar() {\n  console.log(\">> Enter: bar\");\n  console.log(\"<< Exit: bar\");\n}\nfoo();`);\n  const [output, setOutput] = useState([]);\n  const [callStackLogsRaw, setCallStackLogsRaw] = useState([]);\n  const [callStack, setCallStack] = useState([]);\n  const [delay, setDelay] = useState(1000); // in milliseconds\n\n  const handleEditorDidMount = editor => {\n    editorRef.current = editor;\n  };\n  const runCode = () => {\n    const capturedOutput = [];\n    const rawCallStackLogs = [];\n    const customConsole = {\n      log: message => {\n        capturedOutput.push(message);\n        if (message.startsWith(\">> Enter:\") || message.startsWith(\"<< Exit:\")) {\n          rawCallStackLogs.push(message);\n        }\n      }\n    };\n    setOutput([]);\n    setCallStack([]);\n    setCallStackLogsRaw([]);\n    try {\n      run(code, customConsole);\n    } catch (err) {\n      capturedOutput.push(\"Runtime Error: \" + err.message);\n    }\n    setOutput(capturedOutput);\n    setCallStackLogsRaw(rawCallStackLogs);\n\n    // Start visualizing the call stack step-by-step\n    let i = 0;\n    setCallStack([]); // clear old one\n\n    const interval = setInterval(() => {\n      if (i < rawCallStackLogs.length) {\n        setCallStack(prev => [...prev, rawCallStackLogs[i]]);\n        i++;\n      } else {\n        clearInterval(interval);\n      }\n    }, delay);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"editor-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor-section\",\n      children: [/*#__PURE__*/_jsxDEV(Editor, {\n        height: \"400px\",\n        defaultLanguage: \"javascript\",\n        value: code,\n        onChange: value => setCode(value),\n        onMount: handleEditorDidMount,\n        theme: \"vs-dark\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: runCode,\n          children: \"\\u25B6\\uFE0F Run\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"slider\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Call Stack Delay: \", delay, \"ms\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"100\",\n              max: \"2000\",\n              step: \"100\",\n              value: delay,\n              onChange: e => setDelay(Number(e.target.value))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"output\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCE4 Console Output\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: output.join(\"\\n\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"visualizer-section\",\n      children: [/*#__PURE__*/_jsxDEV(MemoryVisualizer, {\n        callStack: callStack,\n        microtasks: microtasks,\n        macrotasks: macrotasks,\n        heap: heap\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 1\n      }, this), \"      \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(EditorPage, \"fRQ9LQMLVQO6yrwhkc24O2wprsg=\");\n_c = EditorPage;\nvar _c;\n$RefreshReg$(_c, \"EditorPage\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Editor","MemoryVisualizer","run","jsxDEV","_jsxDEV","EditorPage","_s","editorRef","code","setCode","output","setOutput","callStackLogsRaw","setCallStackLogsRaw","callStack","setCallStack","delay","setDelay","handleEditorDidMount","editor","current","runCode","capturedOutput","rawCallStackLogs","customConsole","log","message","push","startsWith","err","i","interval","setInterval","length","prev","clearInterval","className","children","height","defaultLanguage","value","onChange","onMount","theme","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","min","max","step","e","Number","target","join","microtasks","macrotasks","heap","_c","$RefreshReg$"],"sources":["/Users/sreedevir/Downloads/js-visualizer-starter/src/components/EditorPage.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport Editor from \"@monaco-editor/react\";\nimport MemoryVisualizer from \"./MemoryVisualizer\";\nimport { run } from \"./interpreter\";\nimport \"./EditorPage.css\";\n\nexport default function EditorPage() {\n  const editorRef = useRef(null);\n  const [code, setCode] = useState(`function foo() {\n  console.log(\">> Enter: foo\");\n  bar();\n  console.log(\"<< Exit: foo\");\n}\nfunction bar() {\n  console.log(\">> Enter: bar\");\n  console.log(\"<< Exit: bar\");\n}\nfoo();`);\n  const [output, setOutput] = useState([]);\n  const [callStackLogsRaw, setCallStackLogsRaw] = useState([]);\n  const [callStack, setCallStack] = useState([]);\n  const [delay, setDelay] = useState(1000); // in milliseconds\n\n  const handleEditorDidMount = (editor) => {\n    editorRef.current = editor;\n  };\n\n  const runCode = () => {\n    const capturedOutput = [];\n    const rawCallStackLogs = [];\n\n    const customConsole = {\n      log: (message) => {\n        capturedOutput.push(message);\n\n        if (message.startsWith(\">> Enter:\") || message.startsWith(\"<< Exit:\")) {\n          rawCallStackLogs.push(message);\n        }\n      },\n    };\n\n    setOutput([]);\n    setCallStack([]);\n    setCallStackLogsRaw([]);\n\n    try {\n      run(code, customConsole);\n    } catch (err) {\n      capturedOutput.push(\"Runtime Error: \" + err.message);\n    }\n\n    setOutput(capturedOutput);\n    setCallStackLogsRaw(rawCallStackLogs);\n\n    // Start visualizing the call stack step-by-step\n    let i = 0;\n    setCallStack([]); // clear old one\n\n    const interval = setInterval(() => {\n      if (i < rawCallStackLogs.length) {\n        setCallStack((prev) => [...prev, rawCallStackLogs[i]]);\n        i++;\n      } else {\n        clearInterval(interval);\n      }\n    }, delay);\n  };\n\n  return (\n    <div className=\"editor-page\">\n      <div className=\"editor-section\">\n        <Editor\n          height=\"400px\"\n          defaultLanguage=\"javascript\"\n          value={code}\n          onChange={(value) => setCode(value)}\n          onMount={handleEditorDidMount}\n          theme=\"vs-dark\"\n        />\n\n        <div className=\"controls\">\n          <button onClick={runCode}>‚ñ∂Ô∏è Run</button>\n\n          <div className=\"slider\">\n            <label>\n              Call Stack Delay: {delay}ms\n              <input\n                type=\"range\"\n                min=\"100\"\n                max=\"2000\"\n                step=\"100\"\n                value={delay}\n                onChange={(e) => setDelay(Number(e.target.value))}\n              />\n            </label>\n          </div>\n        </div>\n\n        <div className=\"output\">\n          <h3>üì§ Console Output</h3>\n          <pre>{output.join(\"\\n\")}</pre>\n        </div>\n      </div>\n\n      <div className=\"visualizer-section\">\n<MemoryVisualizer\n  callStack={callStack}\n  microtasks={microtasks}\n  macrotasks={macrotasks}\n  heap={heap}\n/>      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}