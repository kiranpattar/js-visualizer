{"ast":null,"code":"var _jsxFileName = \"/Users/sreedevir/Downloads/js-visualizer-starter/src/components/EditorPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport Editor from \"@monaco-editor/react\";\nimport \"./EditorPage.css\";\nimport MemoryVisualizer from \"./MemoryVisualizer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditorPage() {\n  _s();\n  const [code, setCode] = useState(`const a = track(function a() {\n  b();\n}, \"a\");\n\nconst b = track(function b() {\n  console.log(\"Inside b\");\n\n  setTimeout(() => {\n    console.log(\"setTimeout done\");\n  }, 0);\n\n  Promise.resolve().then(() => {\n    console.log(\"Promise resolved\");\n  });\n\n  const obj = { message: \"hello\" }; // heap\n  console.log(\"Heap object created\", obj);\n}, \"b\");\n\na();`);\n  const [logs, setLogs] = useState([]);\n  const [callStack, setCallStack] = useState([]);\n  const [microtasks, setMicrotasks] = useState([]);\n  const [macrotasks, setMacrotasks] = useState([]);\n  const [heap, setHeap] = useState([]);\n  const runCode = () => {\n    // Reset states\n    const capturedLogs = [];\n    const capturedStackLogs = [];\n    setLogs([]);\n    setCallStack([]);\n    setMicrotasks([]);\n    setMacrotasks([]);\n    setHeap([]);\n\n    // Overriding console.log to intercept messages\n    const originalLog = console.log;\n    console.log = (...args) => {\n      const message = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : String(arg)).join(\" \");\n      capturedLogs.push(message);\n      setLogs(prev => [...prev, message]);\n\n      // Detect call stack traces\n      if (message.startsWith(\">> Enter:\")) {\n        const fn = message.split(\":\")[1].trim();\n        setCallStack(prev => [...prev, `>> Enter: ${fn}`]);\n      } else if (message.startsWith(\"<< Exit:\")) {\n        const fn = message.split(\":\")[1].trim();\n        setCallStack(prev => [...prev, `<< Exit: ${fn}`]);\n      } else if (message.includes(\"Promise resolved\")) {\n        setMicrotasks(prev => [...prev, \"Promise resolved\"]);\n      } else if (message.includes(\"setTimeout done\")) {\n        setMacrotasks(prev => [...prev, \"setTimeout done\"]);\n      } else if (message.includes(\"Heap object created\")) {\n        var _message$match;\n        const objStr = (_message$match = message.match(/{.*}/)) === null || _message$match === void 0 ? void 0 : _message$match[0];\n        if (objStr) setHeap(prev => [...prev, objStr]);\n      }\n    };\n    try {\n      const track = (fn, name) => {\n        return function () {\n          console.log(`>> Enter: ${name}`);\n          fn();\n          console.log(`<< Exit: ${name}`);\n        };\n      };\n      const wrappedCode = `(function(){\n        ${code}\n      })()`;\n\n      // Create a new function with `track` in scope\n      const run = new Function(\"track\", wrappedCode);\n      run(track);\n    } catch (err) {\n      console.error(\"Error:\", err);\n    } finally {\n      console.log = originalLog;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"editor-page\",\n    children: [/*#__PURE__*/_jsxDEV(Editor, {\n      height: \"300px\",\n      defaultLanguage: \"javascript\",\n      value: code,\n      onChange: value => setCode(value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: runCode,\n      children: \"Run Code\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logs\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Console Logs:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: logs.map((log, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: log\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MemoryVisualizer, {\n      callStack: callStack,\n      microtasks: microtasks,\n      macrotasks: macrotasks,\n      heap: heap\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n_s(EditorPage, \"CIJ3O7grMQKY6qiSguh3Dfmp1nA=\");\n_c = EditorPage;\nvar _c;\n$RefreshReg$(_c, \"EditorPage\");","map":{"version":3,"names":["React","useState","Editor","MemoryVisualizer","jsxDEV","_jsxDEV","EditorPage","_s","code","setCode","logs","setLogs","callStack","setCallStack","microtasks","setMicrotasks","macrotasks","setMacrotasks","heap","setHeap","runCode","capturedLogs","capturedStackLogs","originalLog","console","log","args","message","map","arg","JSON","stringify","String","join","push","prev","startsWith","fn","split","trim","includes","_message$match","objStr","match","track","name","wrappedCode","run","Function","err","error","className","children","height","defaultLanguage","value","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","idx","_c","$RefreshReg$"],"sources":["/Users/sreedevir/Downloads/js-visualizer-starter/src/components/EditorPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Editor from \"@monaco-editor/react\";\nimport \"./EditorPage.css\";\nimport MemoryVisualizer from \"./MemoryVisualizer\";\n\nexport default function EditorPage() {\n  const [code, setCode] = useState(`const a = track(function a() {\n  b();\n}, \"a\");\n\nconst b = track(function b() {\n  console.log(\"Inside b\");\n\n  setTimeout(() => {\n    console.log(\"setTimeout done\");\n  }, 0);\n\n  Promise.resolve().then(() => {\n    console.log(\"Promise resolved\");\n  });\n\n  const obj = { message: \"hello\" }; // heap\n  console.log(\"Heap object created\", obj);\n}, \"b\");\n\na();`);\n\n  const [logs, setLogs] = useState([]);\n  const [callStack, setCallStack] = useState([]);\n  const [microtasks, setMicrotasks] = useState([]);\n  const [macrotasks, setMacrotasks] = useState([]);\n  const [heap, setHeap] = useState([]);\n\n  const runCode = () => {\n    // Reset states\n    const capturedLogs = [];\n    const capturedStackLogs = [];\n\n    setLogs([]);\n    setCallStack([]);\n    setMicrotasks([]);\n    setMacrotasks([]);\n    setHeap([]);\n\n    // Overriding console.log to intercept messages\n    const originalLog = console.log;\n    console.log = (...args) => {\n      const message = args.map(arg =>\n        typeof arg === 'object' ? JSON.stringify(arg) : String(arg)\n      ).join(\" \");\n      capturedLogs.push(message);\n      setLogs(prev => [...prev, message]);\n\n      // Detect call stack traces\n      if (message.startsWith(\">> Enter:\")) {\n        const fn = message.split(\":\")[1].trim();\n        setCallStack(prev => [...prev, `>> Enter: ${fn}`]);\n      } else if (message.startsWith(\"<< Exit:\")) {\n        const fn = message.split(\":\")[1].trim();\n        setCallStack(prev => [...prev, `<< Exit: ${fn}`]);\n      } else if (message.includes(\"Promise resolved\")) {\n        setMicrotasks(prev => [...prev, \"Promise resolved\"]);\n      } else if (message.includes(\"setTimeout done\")) {\n        setMacrotasks(prev => [...prev, \"setTimeout done\"]);\n      } else if (message.includes(\"Heap object created\")) {\n        const objStr = message.match(/{.*}/)?.[0];\n        if (objStr) setHeap(prev => [...prev, objStr]);\n      }\n    };\n\n    try {\n      const track = (fn, name) => {\n        return function () {\n          console.log(`>> Enter: ${name}`);\n          fn();\n          console.log(`<< Exit: ${name}`);\n        };\n      };\n\n      const wrappedCode = `(function(){\n        ${code}\n      })()`;\n\n      // Create a new function with `track` in scope\n      const run = new Function(\"track\", wrappedCode);\n      run(track);\n    } catch (err) {\n      console.error(\"Error:\", err);\n    } finally {\n      console.log = originalLog;\n    }\n  };\n\n  return (\n    <div className=\"editor-page\">\n      <Editor\n        height=\"300px\"\n        defaultLanguage=\"javascript\"\n        value={code}\n        onChange={(value) => setCode(value)}\n      />\n      <button onClick={runCode}>Run Code</button>\n\n      <div className=\"logs\">\n        <h3>Console Logs:</h3>\n        <ul>\n          {logs.map((log, idx) => (\n            <li key={idx}>{log}</li>\n          ))}\n        </ul>\n      </div>\n\n      {/* Memory Visualizer receives all states */}\n      <MemoryVisualizer\n        callStack={callStack}\n        microtasks={microtasks}\n        macrotasks={macrotasks}\n        heap={heap}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}